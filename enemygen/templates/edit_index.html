{% extends "base.html" %}
{% load url from future %}

{% block content %}

<table><tr><td valign="top">
    <h3>Enemy Templates</h3>

    <form action="{% url 'create_enemy_template'%}" method="post">
    {% csrf_token %}
    Select race for the new template:<br>
    <select size="5" name="race_id">
        {% for race in races %}
            <option value="{{ race.id }}">{{ race.name }}</option>
        {% endfor %}
    </select><br>
    <input type="submit" value="Create new template">
    </form>

    <h3>My Enemy Templates</h3>
    <div><p>Type to search: <input id="searchinput" /></p></div>
    
    {% if enemy_templates %}
    <table id="enemy_template_list">
    <thead><tr>
        <th class="sort-alpha">Template name</th>
        <th class="sort-alpha">Race</th>
        <th class="sort-alpha">Rank</th>
    </tr></thead>
    {% for et in enemy_templates %}
        <tr>
            <td><a class="edit_item" href="{% url 'enemy_template' et.id %}">{{ et.name }}</a>{% if not et.published %} *{% endif %}</td>
            <td><a class="edit_item" href="{% url 'race' et.race.id %}">{{ et.race.name }}</a></td>
            <td>
                {% if et.rank = 1 %}Rubble{% endif %}
                {% if et.rank = 2 %}Novice{% endif %}
                {% if et.rank = 3 %}Skilled{% endif %}
                {% if et.rank = 4 %}Veteran{% endif %}
                {% if et.rank = 5 %}Master{% endif %}
            </td>
        </tr>
    {% endfor %}
    </table>
{% endif %}
</td><td width="20">
</td><td valign="top">
    <h3>Party</h3>
    <form action="{% url 'create_party'%}" method="post">
    {% csrf_token %}
    <input type="submit" value="Create new party">
    </form>
    <table>
    {% for party in edit_parties %}
        <tr>
            <td><a class="edit_item" href="{% url 'party' party.id %}">{{ party.name }}</a>{% if not party.published %} *{% endif %}</td>
        </tr>
    {% endfor %}
    </table>
{% if edit_races %}
</td><td width="20">
</td><td valign="top">
    <h3>Races</h3>
    <form action="{% url 'create_race'%}" method="post">
    {% csrf_token %}
    <input type="submit" value="Create new race">
    </form>
    <table>
    {% for race in edit_races %}
        <tr>
            <td><a class="edit_item" href="{% url 'race' race.id %}">{{ race.name }}</a>{% if not race.published %} *{% endif %}</td>
        </tr>
    {% endfor %}
    </table>
{% endif %}
</td></tr></table>
<p>* Unpublished</p>


<script>
$(document).ready(function(){
    var table = new ttable('enemy_template_list'); 
    table.sorting.enabled = true;
    table.sorting.sortall = false;
    table.search.enabled = true;
    table.search.inputID = 'searchinput';
    table.search.casesensitive = false;
    table.style.num = false;
    table.rendertable();
});
</script>

{% endblock %}