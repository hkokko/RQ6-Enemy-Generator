{% extends "base.html" %}

{% block content %}

<div class="card shadow-sm mb-3">
  <div class="card-body d-flex align-items-center gap-2 flex-wrap">
    <h3 class="h5 mb-0">Races</h3>
    <form action="{% url 'create_race'%}" method="post" class="ms-auto">
      {% csrf_token %}
      <button type="submit" class="btn btn-primary btn-sm">Create new race</button>
    </form>
  </div>
</div>

<div class="mb-2 d-flex align-items-center gap-2 flex-wrap">
  <label for="race_searchinput" class="form-label mb-0">Type to search:</label>
  <input id="race_searchinput" class="form-control form-control-sm d-inline-block w-auto" />
</div>

<div class="table-responsive">
  <table id="race_list" class="table table-sm align-middle">
    <thead>
      <tr><th class="sort-alpha">Race</th><th></th></tr>
    </thead>
    <tbody>
    {% for race in edit_races %}
      <tr>
        <td><a class="edit_item" href="{% url 'race' race.id %}">{{ race.name }}</a>{% if not race.published %} <span class="text-muted">*</span>{% endif %}</td>
        <td class="text-end">
          <form action="{% url 'clone_race' race.id %}" method="post" class="d-inline-block">
            {% csrf_token %}
            <button type="submit" class="btn btn-outline-secondary btn-sm">Clone</button>
          </form>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>

<p class="mt-2 text-muted">* Unpublished</p>

<script>
$(document).ready(function(){
    var table = new ttable('race_list');
    table.sorting.enabled = true;
    table.sorting.sortall = false;
    table.search.enabled = true;
    table.search.inputID = 'race_searchinput';
    table.search.casesensitive = false;
    table.style.num = false;
    table.rendertable();
});
</script>

{% endblock %}